<!-- HX-Swabs -->
<div 
    id="error-message" 
    hx-swap-oob="true"
    {% if error_message %} 
    class="
        {% if error_type == 'error' %} bg-red-100 border-red-500 text-red-700
        {% elif error_type == 'warning' %} bg-yellow-100 border-yellow-500 text-yellow-700
        {% endif %}
        border-l-4 p-4 mb-4">
        <p>{{ error_message }}</p>
    {% endif %}
</div>


<!-- Main Target -->
{% if results %}
    <!-- Search Results -->
    <div class="mb-2">
        <p class="text-sm text-gray-500">
            {{ text_above_results }}
        </p>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
        {% include 'partials/artwork_cards_and_trigger.html' %}
    </div>
{% else %}
    <!-- No Results Message -->
    <div class="text-center mt-8">
        <p class="text-lg text-gray-600">
            No artworks match your filters.
    </div>
{% endif %}

<!-- Thumbnail Image Modal -->
<div x-data="{ isOpen: false, imageUrl: '' }"
    x-show="isOpen"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-50"
    @open-modal.window="
        imageUrl = $event.detail.imageUrl;
        isOpen = true;
    "
    x-transition.opacity
    x-cloak>

    <!-- Modal Card -->
    <div class="bg-white rounded-lg shadow-lg max-w-3xl mx-auto relative" @click="isOpen = false">
        <div class="p-4">
            <img :src="imageUrl"
                    alt="Artwork"
                    class="rounded-lg shadow-md max-w-full max-h-[80vh]">
        </div>
    </div>
</div>

<!-- JavaScript Functions -->
<script>
    function openModal(imageUrl) {
        window.dispatchEvent(new CustomEvent('open-modal', { detail: { imageUrl } }));
    }
</script>
